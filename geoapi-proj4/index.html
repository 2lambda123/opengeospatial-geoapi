<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.1 from src/site/apt/index.apt at 2019-09-17

 | Rendered using Apache Maven Default Skin
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.9.1" />
    <title>GeoAPI &#x2013; PROJ bindings</title>
    <link rel="stylesheet" href="./css/maven-base.css" />
    <link rel="stylesheet" href="./css/maven-theme.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
  </head>
  <body class="composite">
    <div id="banner">
<a href="../index.html" id="bannerLeft" title="GeoAPI"><img src="../images/geoapi.png"  alt="GeoAPI"/></a>      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
      <div class="xleft">
        <span id="publishDate">Last Published: 2019-09-17</span>
          &#xA0;| <span id="projectVersion">Version: 3.1-SNAPSHOT</span>
      </div>
      <div class="xright"><a href="http://www.opengeospatial.org" class="externalLink" title="Open Geospatial Consortium (OGC)">Open Geospatial Consortium (OGC)</a> |
<a href="http://www.opengeospatial.org/standards/geoapi" class="externalLink" title="Specification">Specification</a> |
<a href="http://sourceforge.net/projects/geoapi/files/GeoAPI-3_0_1.zip/download" class="externalLink" title="Download">Download</a> |
<a href="../implementations.html" title="Implementations">Implementations</a>      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
       <h5>Proj4 bindings</h5>
    <ul>
     <li class="none"><a href="apidocs/index.html" title="Javadoc">Javadoc</a></li>
    </ul>
       <h5>Project Documentation</h5>
    <ul>
     <li class="expanded"><a href="project-info.html" title="Project Information">Project Information</a>
      <ul>
       <li class="none"><strong>About</strong></li>
       <li class="none"><a href="summary.html" title="Summary">Summary</a></li>
       <li class="none"><a href="licenses.html" title="Licenses">Licenses</a></li>
       <li class="none"><a href="scm.html" title="Source Code Management">Source Code Management</a></li>
       <li class="none"><a href="mailing-lists.html" title="Mailing Lists">Mailing Lists</a></li>
       <li class="none"><a href="issue-management.html" title="Issue Management">Issue Management</a></li>
      </ul></li>
     <li class="collapsed"><a href="project-reports.html" title="Project Reports">Project Reports</a></li>
    </ul>
      <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
      </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
<section>
<h2><a name="PROJ_bindings"></a>PROJ bindings</h2>
<p>This module is a &quot;proof of concept&quot; implementation of GeoAPI referencing interfaces using JNI bindings to the C/C++ <a class="externalLink" href="https://proj4.org/">PROJ</a> library. This module contains two packages:</p>
<ul>
<li>The <code><a href="./apidocs/org/proj4/package-summary.html">org.proj4</a></code> package contains a slightly modified copy of the classes provided in the <code>jniwrap</code> directory of the Proj.4 project. The slight modifications are binary-compatible.</li>
<li>The <code><a href="./apidocs/org/opengis/wrapper/proj4/package-summary.html">org.opengis.wrapper.proj4</a></code> package contains implementations of GeoAPI interfaces on top of the <code>org.proj4</code> package.</li></ul>
<p>This module requires the PROJ native library version 4.8 or above. The PROJ library is used for performing map projection calculations. The GeoAPI wrappers extend the PROJ services by providing the following additional functionalities:</p>
<ul>
<li>Coordinate Reference Systems created from EPSG code honor axis order as defined by EPSG. This reordering can be disabled if the usual (&#x3bb;,&#x3c6;) order is desired.</li>
<li>Coordinate Operations and Math Transforms can be created from EPSG and OGC parameter names, in addition of PROJ parameter names.</li></ul>
<p>See <a class="externalLink" href="https://github.com/OSGeo/proj.4/tree/master/jniwrap#proj-bridge-to-java">PROJ bridge to Java</a> for PROJ compilation instructions.</p><section>
<h3><a name="Licensing"></a>Licensing</h3>
<p><i>All files provided in this module are hereby placed into the Public Domain.</i> This means anyone is free to do whatever they wish with those files. The PROJ wrappers are provided as code examples, in the hope to facilitate GeoAPI implementations backed by other libraries. Implementors can take this source code and use it for any purpose, commercial or non-commercial, copyrighted or open-source, with no legal obligation to acknowledge the borrowing/copying in any way.</p>
<p>Note that the <a href="../geoapi/index.html">GeoAPI interfaces</a> are <b>not</b> in the public domain; they are copyrighted by <a class="externalLink" href="http://www.opengeospatial.org">OGC</a> and distributed under a permissive, BSD-like license. Only the example codes - including this PROJ wrappers module - are in the public domain.</p></section><section>
<h3><a name="Download"></a>Download</h3>
<p>The PROJ bindings can be used in a Maven project using the following <code>pom.xml</code> configuration. Note that the PROJ native library needs to be installed manually; this is not done by Maven.</p>
<div class="source">
<pre>&lt;repositories&gt;
  &lt;repository&gt;
    &lt;id&gt;geotoolkit&lt;/id&gt;
    &lt;name&gt;Geotoolkit.org project&lt;/name&gt;
    &lt;url&gt;http://maven.geotoolkit.org&lt;/url&gt;
  &lt;/repository&gt;
&lt;/repositories&gt;

&lt;dependencies&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.opengis.wrapper&lt;/groupId&gt;
    &lt;artifactId&gt;geoapi-proj4&lt;/artifactId&gt;
    &lt;version&gt;3.1-SNAPSHOT&lt;/version&gt;
  &lt;/dependency&gt;
&lt;/dependencies&gt;</pre></div></section><section>
<h3><a name="Usage_example"></a>Usage example</h3>
<p>PROJ functionality can be used directly (without GeoAPI interfaces) by the <a href="./apidocs/org/proj4/PJ.html">PJ</a> class as below:</p>
<div class="source">
<pre>package org.myproject;

import org.proj4.*;
import java.util.Arrays;


/**
 * Converts coordinates from EPSG:32632 (WGS 84 / UTM zone 32N) to WGS84,
 * then prints the result to the standard output stream.
 */
public class MyApp {
    public static void main(String[] args) throws PJException {
        PJ sourcePJ = new PJ(&quot;+init=epsg:32632&quot;);                   // (x,y) axis order
        PJ targetPJ = new PJ(&quot;+proj=latlong +datum=WGS84&quot;);         // (&#x3bb;,&#x3c6;) axis order
        double[] coordinates = {
            500000,       0,   // First coordinate
            400000,  100000,   // Second coordinate
            600000, -100000    // Third coordinate
        };
        sourcePJ.transform(targetPJ, 2, coordinates, 0, 3);
        System.out.println(Arrays.toString(coordinates));
    }
}</pre></div>
<p>The above example - especially the CRS definitions given to the <code>PJ</code> constructors - was specific to the PROJ library. The same functionality can be achieved through the implementation-neutral GeoAPI interfaces as below:</p>
<div class="source">
<pre>package org.myproject;

import org.opengis.referencing.crs.CRSAuthorityFactory;
import org.opengis.referencing.crs.CoordinateReferenceSystem;
import org.opengis.referencing.operation.CoordinateOperation;
import org.opengis.referencing.operation.CoordinateOperationFactory;
import org.opengis.referencing.operation.TransformException;
import org.opengis.util.FactoryException;
import org.opengis.wrapper.proj4.PJFactory;
import java.util.Arrays;


/**
 * Converts coordinates from EPSG:32632 (WGS 84 / UTM zone 32N) to WGS84,
 * then prints the result to the standard output stream.
 */
public class MyApp {
    public static void main(String[] args) throws FactoryException, TransformException {
        // The following lines instantiate directly the factories for the PROJ bindings
        // for simplicity reasons, but a real application would be encouraged to use some
        // kind of Service Registry instead.
        CRSAuthorityFactory       crsFactory = new PJFactory.EPSG();
        CoordinateOperationFactory opFactory = new PJFactory.Operation();

        // From this point, use only the GeoAPI interfaces.
        CoordinateReferenceSystem sourceCRS = crsFactory.createCoordinateReferenceSystem(&quot;32632&quot;);
        CoordinateReferenceSystem targetCRS = crsFactory.createCoordinateReferenceSystem(&quot;4326&quot;);
        CoordinateOperation operation = opFactory.createOperation(sourceCRS, targetCRS);
        double[] coordinates = {
            500000,       0,   // First coordinate
            400000,  100000,   // Second coordinate
            600000, -100000    // Third coordinate
        };
        operation.getMathTransform().transform(coordinates, 0, coordinates, 0, 3);
        System.out.println(Arrays.toString(coordinates));
    }
}</pre></div></section></section>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
        Copyright &#169;      1994&#x2013;2019<a href="http://www.opengeospatial.org/">Open Geospatial Consortium</a>.
.      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
