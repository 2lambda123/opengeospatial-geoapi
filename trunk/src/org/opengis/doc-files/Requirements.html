<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<HTML>
  <HEAD>
    <TITLE>How to download, build and run GeoAPI</TITLE>
  </HEAD>
  <BODY>
  <P><B><U>Table of contents</U></B></P>
  <UL>
    <LI><A HREF="#download">Download sources and binary</A></LI>
    <LI><A HREF="#requirement">Compilation and execution requirements</A></LI>
    <UL>
      <LI><A HREF="#running">Running (client side)</A></LI>
      <LI><A HREF="#compiling">Compiling (developer side)</A></LI>
    </UL>
    <LI><A HREF="#CVS">Anonymous CVS access</A></LI>
    <UL>
      <LI><A HREF="#compilingCVS">Compiling code from the CVS</A></LI>
    </UL>
  </UL>
  
  <P>&nbsp;</P>
  <HR>
  <P>&nbsp;</P>
  <H1><A NAME="download">Download sources and binary</A></H1>
  <P ALIGN="justify">Milestones can be downloaded from the <A HREF="http://geoapi.sourceforge.net">GeoAPI
  main page</A>. The download is a ZIP file containing:</P>
  <UL>
    <LI>The Java source code (see the <A HREF="#compiling">compilation requirements</A> above).</LI>
    <LI>The <A HREF="http://geoapi.sourceforge.net/javadoc">javadoc</A> as a set of HTML pages.</LI>
    <LI>The binaries (compiled class files) as two JAR files:</LI>
    <UL>
      <LI><CODE><STRONG>opengis.jar</STRONG></CODE>: the standard JAR targeting the Java standard
          environment <A HREF="http://java.sun.com/j2se/1.3/">version 1.3</A> or later.</LI>
      <LI><CODE><STRONG>opengis-tiger.jar</STRONG></CODE>: a JAR targeting the Java environment
          <A HREF="http://java.sun.com/j2se/1.5/">version 1.5</A> or later.<BR>This JAR is identical
          to <CODE>opengis.jar</CODE> except that it includes generic type information and
          annotations.</LI>
    </UL>
  </UL>
  <P ALIGN="justify">Developers who don’t need the "bleeding edge" GeoAPI's features are encouraged
  to link against one of those two JAR files, instead of <A HREF="#CVS">working from the CVS</A>.
  The javadoc can be <A HREF="http://geoapi.sourceforge.net/javadoc/">browsed online</A> before
  downloading. The build date in the upper right corner provides a way to check if a newer version
  is available for download.</A>

  <P ALIGN="justify"><STRONG>TODO:</STRONG> Before the next OGC meeting in
  Ottawa (April 19), a more "official" download will be released in the
  <A HREF="http://sourceforge.net/project/showfiles.php?group_id=70002">SourceForge download
  page</A>.</P>

  <P>&nbsp;</P>
  <HR>
  <P>&nbsp;</P>
  <H1><A NAME="requirement">Compilation and execution requirements</A></H1>
  <P ALIGN="justify"><STRONG>Execution</STRONG> on the client side and <STRONG>compilation</STRONG>
  on the developer side have different requirements:</P>
  <TABLE BORDER='1'>
    <TR BGCOLOR='Lavender'>
      <TH><A NAME="running">Execution (client side)</A></TH>
      <TH><A NAME="compiling">Compilation (developer side)</A></TH>
    </TR>
    <TR BGCOLOR='GhostWhite' VALIGN="top"><TD><UL>
    <LI>Java standard environment <A HREF="http://java.sun.com/j2se/1.3/">version 1.3</A> or later.</LI>
    <LI>Any <A HREF="http://jsr-108.sourceforge.net">JSR-108 units implementation</A>.</LI>
    </UL></TD>

    <TD><UL>
    <LI>Java development kit <A HREF="http://java.sun.com/j2se/1.5/">version <STRONG>1.5</STRONG></A> or later.</LI>
    <LI>Any <A HREF="http://jsr-108.sourceforge.net">JSR-108 units implementation</A>.</LI>
    </UL></TD></TR>
  </TABLE>

  <P ALIGN="justify">Compilation requires <A HREF="http://java.sun.com/j2se/1.5/">J2SE&nbsp;1.5</A>
  rather than <A HREF="http://java.sun.com/j2se/1.3/">1.3</A> because the specification uses
  covariant return types in method overriding. Covariance is used in many places in the
  <A HREF="http://www.opengis.org">OpenGIS</A> and <A HREF="http://www.iso.ch">ISO</A>
  specifications, including both ISO&nbsp;19107 and ISO&nbsp;19111. For example, the two
  following interfaces are extracts from the specification:</P>

  <BLOCKQUOTE>
  <PRE>interface <A HREF="../crs/crs/CoordinateReferenceSystem.html">CoordinateReferenceSystem</A> { 
    public <A HREF="../crs/cs/CoordinateSystem.html">CoordinateSystem</A> getCoordinateSystem(); 
}</PRE>

  <PRE>interface <A HREF="../crs/crs/ProjectedCRS.html">ProjectedCRS</A> extends CoordinateReferenceSystem { 
    public <A HREF="../crs/cs/CartesianCS.html">CartesianCS</A> getCoordinateSystem(); 
}</PRE>
  </BLOCKQUOTE>

  <P ALIGN="justify">The method <CODE>getCoordinateSystem()</CODE>, initially defined in
  <CODE>CoordinateReferenceSystem</CODE>, is overridden in <CODE>ProjectedCRS</CODE> with
  a more restricted return type: <CODE>CartesianCS</CODE>, which is a subinterface of
  <CODE>CoordinateSystem</CODE>. The specification captures the fact that, while a generic
  <CODE>CRS</CODE> may use an arbitrary <CODE>CS</CODE>, only <CODE>CartesianCS</CODE> is
  legal for <CODE>ProjectedCRS</CODE>. Such covariance is allowed at the virtual machine
  level, but not at the compiler level prior to 1.5. See for example the comments from
  some Sun engineers:</P>

  <BLOCKQUOTE><P ALIGN="justify">"<CITE>This was a feature in early versions of the Java language,
  and might conceivably be reinstated. It's an excellent notion from a software design and
  engineering perspective, and perfectly type safe.</CITE>"
  <FONT size=2>(Source:
  <A HREF="http://developer.java.sun.com/developer/bugParade/bugs/4106143.html">RFE #4106143</A>)</FONT></P></BLOCKQUOTE>

  <P ALIGN="justify">This feature has actually been reinstated in the J2SE 1.5 compiler.
  <STRONG>Note that this is fully compatible with J2SE 1.3 runtime environment</STRONG>.
  In short, developpers need a J2SE 1.5 compiler, but only the compiler, not the runtime.
  The compiled code will work perfectly on a J2SE 1.3 virtual machine with no change:</P>

  <BLOCKQUOTE><P ALIGN="justify">"<CITE>The Java virtual machine, for reasons of binary compatibility,
  already allows a method to be overridden by a method of the same signature but with a return type
  which is a subtype of the method it overrides. For greater type safety, the Java language should
  remove the restriction that overriding methods must have the same return type as the methods they
  override.</CITE> [...snip...] <CITE>Note that this is a 100% compatible change.</CITE>"
  <FONT size=2>(Source:
  <A HREF="http://developer.java.sun.com/developer/bugParade/bugs/4191252.html">RFE #4191252</A>)</FONT></P></BLOCKQUOTE>

  <P ALIGN="justify">In order to compile classes against the
  <A HREF="http://geoapi.sourceforge.net">GeoAPI</A> library, make sure that <CODE>opengis.jar</CODE>
  and <CODE>units.jar</CODE> appears in the classpath or in the J2SE 1.3 extension directory. Then,
  invoke <CODE>javac</CODE> with the following arguments:</P>

  <BLOCKQUOTE><CODE>javac
  &nbsp;<A HREF="http://java.sun.com/j2se/1.5.0/docs/tooldocs/solaris/javac.html#standard">-source</A> 1.3
  &nbsp;<A HREF="http://java.sun.com/j2se/1.5.0/docs/tooldocs/solaris/javac.html#crosscomp-options">-target</A> 1.3
  &nbsp;<A HREF="http://java.sun.com/j2se/1.5.0/docs/tooldocs/solaris/javac.html#crosscomp-options">-bootclasspath</A>
  <I>$KESTREL_HOME</I>/jre/lib/rt.jar
  &nbsp;<A HREF="http://java.sun.com/j2se/1.5.0/docs/tooldocs/solaris/javac.html#crosscomp-options">-extdirs</A>
  <I>$KESTREL_HOME</I>/jre/lib/ext
  &nbsp;<I>MyApplication.java</I>
  </CODE></BLOCKQUOTE>

  <P ALIGN="justify">where <CODE><I>$KESTREL_HOME</I></CODE> is the path to the J2SE 1.3 (alias
  "<A HREF="http://java.sun.com/j2se/codenames.html">Kestrel</A>") installation directory. The
  <CODE>-source&nbsp;1.3</CODE> argument ensures that no new language feature is used except
  covariant return type. Covariance is treated specially in this regard since it is a compatible
  change <FONT size=2>(source:
  <A HREF="http://developer.java.sun.com/developer/bugParade/bugs/4862139.html">RFE #4862139</A>)</FONT>.
  The <CODE>-bootclasspath</CODE> option force the compilation against J2SE 1.3 API instead of the
  default one (J2SE 1.5). Failing to do this might allow compilation against a Java 2 platform API
  that would not be present on a 1.3 virtual machine and fail at runtime.</P>



  <P>&nbsp;</P>
  <HR>
  <P>&nbsp;</P>
  <H1><A NAME="CVS">Anonymous CVS access</A></H1>
  <P ALIGN="justify">CVS (Concurrent Versions System) stores the source code in a centralized
  location. CVS is designed as a tool for developers; the source code stored in CVS should be
  thought of as "bleeding edge". If you are simply looking for the latest version of
  <A HREF="http://geoapi.sourceforge.net">GeoAPI</A>, you should check the project's download page
  <STRONG>before</STRONG> retrieving data from CVS. If you just have an interest in contributing,
  then the latest CVS version is often ideal, since it should include any fixes made since the most
  recent stable release. The project's <A HREF="http://www.sourceforge.net">SourceForge.net</A>
  CVS repository can be checked out through anonymous CVS with the following instruction set.
  When prompted for a password for anonymous, simply press the Enter key.</P>

  <BLOCKQUOTE>
  <PRE>cvs -d:pserver:anonymous@cvs.sourceforge.net:/cvsroot/geoapi login
cvs -z3 -d:pserver:anonymous@cvs.sourceforge.net:/cvsroot/geoapi checkout src</PRE>
  </BLOCKQUOTE>

  <P ALIGN="justify"><STRONG>NOTE:</STRONG> UNIX file and directory names are case sensitive.
  The path to the project CVSROOT must be specified using lowercase characters
  (i.e. <CODE>/cvsroot/geoapi</CODE>).

  Information about accessing this CVS repository may be found in the document titled,
  "<A HREF="http://sourceforge.net/docman/display_doc.php?docid=14033&group_id=1">Basic
  Introduction to CVS and SourceForge.net (SF.net) Project CVS Services</A>".

  <H2><A NAME="compilingCVS">Compiling the source code from the CVS</A></H2>
  <P ALIGN="justify">In addition to the above-cited <A HREF="#requirement">requirements</A>,
  compiling the GeoAPI's source code requires
  <A HREF="http://java.sun.com/products/java-media/jai/">Java Advanced Imaging</A> and
  <A HREF="http://java.sun.com/products/java-media/3D/">Java 3D</A> extensions in order to resolve
  javadoc links. If the compilation targets any J2SE version prior to 1.5, then the generic types and the
  annotations must be erased before to compile the source. An <A HREF="http://ant.apache.org/">Ant</A>
  script available on the GeoAPI's CVS performs exactly that.</P>
  </BODY>
</HTML>
