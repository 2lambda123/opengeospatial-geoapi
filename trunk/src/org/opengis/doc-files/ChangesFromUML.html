<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<HTML>
  <HEAD>
    <TITLE>Changes from UML diagrams</TITLE>
  </HEAD>
  <BODY>
  <H1>Changes from UML diagrams</H1>


  <P>&nbsp;</P>
  <H2>Changes in Spatial Referencing by Coordinates</H2>
  <UL>
    <LI><P ALIGN="justify">Added a
        <A HREF="../crs/Info.html"><CODE>Info</CODE></A> interface as the parent of the following ones:
        <A HREF="../crs/ReferenceSystem.html"><CODE>ReferenceSystem</CODE></A>,
        <A HREF="../crs/cs/CoordinateSystem.html"><CODE>CoordinateSystem</CODE></A>,
        <A HREF="../crs/cs/CoordinateSystemAxis.html"><CODE>CoordinateSystemAxis</CODE></A>,
        <A HREF="../crs/datum/Datum.html"><CODE>Datum</CODE></A>,
        <A HREF="../crs/datum/PrimeMeridian.html"><CODE>PrimeMeridian</CODE></A>,
        <A HREF="../crs/datum/Ellipsoid.html"><CODE>Ellipsoid</CODE></A>,
        <A HREF="../crs/operation/CoordinateOperation.html"><CODE>CoordinateOperation</CODE></A>,
        <A HREF="../crs/operation/OperationMethod.html"><CODE>OperationMethod</CODE></A>,
        <A HREF="../crs/operation/GeneralOperationParameter.html"><CODE>GeneralOperationParameter</CODE></A>.
        This interface defines the <CODE>getName</CODE>, <CODE>getIdentifiers</CODE> and
        <CODE>getRemarks</CODE> methods, which are common to all above-cited interfaces.
        This <CODE>Info</CODE> root interface is similar to the legacy
        <A HREF=../../../../legacy/org/opengis/cs/CS_Info.html><CODE>CS_Info</CODE></A>
        interface from the implementation specification 1.0.</P></LI>

    <LI><P ALIGN="justify">Union structures avoided. Consequently, the following structures were
         omitted: <CODE>CD_SecondDefiningParameter</CODE> (replaced by an API similar to the legacy
         <A HREF=../../../../legacy/org/opengis/cs/CS_Ellipsoid.html><CODE>CS_Ellipsoid</CODE></A>).</P></LI>

    <LI><P ALIGN="justify">Added a
        <A HREF="../crs/operation/Matrix.html"><CODE>Matrix</CODE></A> interface as the parent of
        <A HREF="../crs/quality/CovarianceMatrix.html"><CODE>CovarianceMatrix</CODE></A>.</P></LI>

    <LI><P ALIGN="justify">Renamed <CODE>ParameterValueGroup.getGroup()</CODE> method as
         <A HREF="../crs/operation/ParameterValueGroup.html#getDescriptor()"><CODE>getDescriptor()</CODE></A>
         and moved it in the hierarchy up into
         <A HREF="../crs/operation/GeneralParameterValue.html#getDescriptor()"><CODE>GeneralParameterValue</CODE></A>.
         The <CODE>getDescriptor()</CODE> name was choosen because <CODE>getGroup()</CODE> seems too
         restrictive, misleading (it returns an abstract definition of a group of parameters, not the
         actual group), and for consistency with usage in other Java extensions (e.g.
         <A HREF="http://java.sun.com/products/java-media/jai/forDevelopers/jai-apidocs/javax/media/jai/ParameterList.html#getParameterListDescriptor()"><CODE>ParameterList</CODE></A>).</P></LI>
  </UL>



  <P>&nbsp;</P>
  <H2>Changes in Feature Geometry</H2>
  <UL>
    <LI><P ALIGN="justify">Renamed <CODE>GM_Object</CODE> as
        <A HREF="../spatialschema/geometry/Geometry.html"><CODE>Geometry</CODE></A>
        in order to avoid ambiguity with <CODE>java.lang.Object</CODE>.</P></LI>

    <LI><P ALIGN="justify">Moved <A HREF="../spatialschema/geometry/Envelope.html"><CODE>Envelope</CODE></A>
        and <A HREF="../spatialschema/geometry/DirectPosition.html"><CODE>DirectPosition</CODE></A>
        in the root geometry package (<CODE>org.opengis.spatialschema.geometry</CODE>) since they are
        used in many places in most packages.</P></LI>
  </UL>


  <P>&nbsp;</P>
  <H2>Changes in Grid Coverages</H2>
  <UL>
    <LI><P ALIGN="justify">In <A HREF="../coverage/Coverage.html"><CODE>Coverage</CODE></A>, changed
        <CODE>evaluateAsDouble(DirectPosition)</CODE> into <CODE>evaluate(DirectPosition, double[])</CODE>
        for reusing optionally pre-allocated array. This is consistent with Java usage in <CODE>Raster</CODE>
        for example. Same apply to all <CODE>evaluateAsFoo(DirectPosition)</CODE> methods.</P></LI>

    <LI><P ALIGN="justify">In <A HREF="../coverage/grid/GridCoverage.html"><CODE>GridCoverage</CODE></A>, changed
        <CODE>getDataBlockAsDouble(GridRange)</CODE> into <CODE>getDataBlock(GridCoverage, double[])</CODE>
        for reusing optionally pre-allocated array. This is consistent with Java usage in <CODE>Raster</CODE>
        for example. Same apply to all <CODE>getDataBlockAsFoo(GridRange)</CODE> methods.</P></LI>

    <LI><P ALIGN="justify">Return type of
        <A HREF="../coverage/Coverage.html#getSource(int)"><CODE>Coverage.getSource(int)</CODE></A>
        was relaxed from <CODE>GridCoverage</CODE> to <CODE>Coverage</CODE>. Instead, the return
        type has been constrained to <CODE>GridCoverage</CODE> only in
        <A HREF="../coverage/grid/GridCoverage.html#getSource(int)"><CODE>GridCoverage.getSource(int)</CODE></A>.
        This approach (return type covariance) was already used in "Spatial Referencing by
        Coordinates" (ISO 19107). It avoid forward dependency of <CODE>Coverage</CODE> toward
        <CODE>GridCoverage</CODE> and give more flexibility for use of <CODE>Coverage</CODE>
        with non-gridded data.</P></LI>

    <LI><P ALIGN="justify">In <CODE>Coverage</CODE>, added an optional
        <A HREF="../coverage/Coverage.html#getRenderableImage(int, int)"><CODE>getRenderableImage</CODE></A>
        method for interoperability with Java2D.</P></LI>

    <LI><P ALIGN="justify">Exceptions
        <A HREF="../coverage/MetadataNameNotFoundException.html"><CODE>MetadataNameNotFoundException</CODE></A>
        were declared only once in the CV package, not duplicated in every packages.</P></LI>

    <LI><P ALIGN="justify">Omitted
        <CODE>InvalidIndexException</CODE> (replaced by <CODE>IndexOutOfBoundsException</CODE>) and
        <CODE>ErrorExportingGridCoverageException</CODE> (replaced by <CODE>IOException</CODE>).</P></LI>

    <LI><P ALIGN="justify">Added
        <A HREF="../coverage/CannotEvaluateException.html"><CODE>CannotEvaluateException</CODE></A> as a super-class of
        <A HREF="../coverage/PointOutsideCoverageException.html"><CODE>PointOutsideCoverageException</CODE></A>.</P></LI>
  </UL>
  </BODY>
</HTML>
